<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard</title>
    <link rel="shortcut icon" href="./images/title.png" type="image/x-icon">
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body{
            min-height: 100%;
        }

        body{
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(90deg, #b3edf4, #759eff);
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: white;
            padding: 20px;
        }
        .container{
            max-width: 1200px;
            margin: auto;
        }   
        .header{
            text-align: center;
            color:white;
            margin-bottom: 30px;
        }
        .header h1{
            font-size: 40px;
            margin-bottom: 10px;
        }
        .header p{
            color:#fff59d;
        }
        .search-box{
            justify-content: center;
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        .search-box input{
            padding: 12px 28px;
            width: 350px;
            border: 2px solid transparent;
            border-radius: 25px;
            font-size: 15px;
            outline: none;
            color: #333;
            transition: all 0.3s ease;
        }
        .search-box input:hover{
            transform: scale(1.02);
        }
        .search-box input:focus{
            border-color: #2c2c54;
            box-shadow: 0 8px 20px rgba(44, 44, 84, 0.25);
            transform: scale(1.03);
        }
        .search-box input::placeholder{
            color: #777;
            transition: opacity 0.3s ease;
        }
        .search-box input:focus::placeholder{
            opacity: 0.4;
        }
        .search-box button{
            padding: 12px 22px;
            border-radius: 25px;
            border: none;
            background-color: #fccd22;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .search-box button:hover{
            background-color: #ffdb28;
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 8px 18px rgba(0,0,0,0.25);
        }
        .search-box button:active{
            transform: translateY(0) scale(0.97);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .current-weather,.forecast-section{
            background: rgba(225,225,225,0.7);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            color:rgb(0, 63, 114);
            box-shadow:0 10px 30px rgba(0,10,10,0.5);
        }
        .current-main{
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .current-main,.weather-icon{
            font-size: 75px;
        }
        .temperature{
            font-size: 30px;
            color:rgb(24, 102, 166);
            text-transform: capitalize;
        }
        .description{
            font-size: 15px;
            font-weight: 700;
            color:rgb(24, 102, 166);
            text-transform: capitalize;

        }
        .weather-details{
            display: grid;
            gap:10px;
            grid-template-columns: repeat(auto-fit,minmax(120px,1fr)) ;
        }
        .detail-item{
            background-color:lavender;
            padding: 10px;
            border-radius: 15px;
            text-align: center;
        }
        .label{
            color: rgb(0, 63, 114);
            font-size: 15px;
            font-weight: bold;
        }
        .value{
            font-size: 20px;
            font-weight:bold;
            color: rgb(36, 105, 162);
        }
        .hourly-forecast{
            min-width: 100px;
            background: #333;
            padding: 15px;
            border-radius: 25px;
            text-align: center;
        }
        .daily-forecast{
            display: grid;
            grid-template-columns: repeat(auto-fit,minmax140,1fr);
            gap:10px;
        }
        .daily-forecast{
            background: #333;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }
        .loading{
            text-align: center;
            font-size:20px;
            padding: 30px;
            font-weight: bold;
        }
        .error{
            text-align: center;
            border-radius: 15px;
            padding: 15px;
            background: rgb(250, 18, 18);
            width: 300px;
            display: flex;
            justify-content: center;
            font-size: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Weather Dashboard</h1>
            <p>üåû This is real time weather dashboard</p>
        </div>
    </div>
    <div class="search-box">
        <input id="cityInput" type="text" placeholder="Search City...">
        <button onclick="">Search</button>
    </div>
    <div id="errorMsg" class="error"></div>
    <div id="loading" class="loading">Loading weather data...</div>
    <div class="weatherContent" id="weather-content">
        <div class="current-weather">
            <div>
                <div class="location" id="location"></div>
                <div class="date" id="date"></div>
            </div>
            <div class="current-main">
                <div class="weather-icon" id="currentIcon">‚òÄÔ∏è</div>
                <div>
                    <div class="temperature" id="temperature"></div>
                    <div class="description" id="description"></div>
                </div>
            </div>
            <div class="weather-details">
                <div class="detail-item">
                    <div class="label">Feels like</div>
                    <div class="value" id="feelslike"></div>
                </div>
                <div class="detail-item">
                    <div class="label">Humidity</div>
                    <div class="value" id="humidity"></div>
                </div>
                <div class="detail-item">
                    <div class="label">Wind Speed</div>
                    <div class="value" id="windspeed"></div>
                </div>
                <div class="detail-item">
                    <div class="label">Pressure</div>
                    <div class="value" id="pressure"></div>
                </div>
            </div>
    </div>
            <div class="forecast-section">
                <h2>Hourly Forecast</h2>
                <div class="hourly-forcast" id="hourlyForecast"></div>
            </div>
            <div class="forecast-section">
                <h2>7-days Forecast</h2>
                <div class="days-forecast" id="daysForecast"></div>
            </div>
        </div>
<script>
    const getElement=(id)=>document.getElementById(id)
    const WEATHER_ICONS = {
        0: "‚òÄÔ∏è",
        1: "üå§Ô∏è",
        2: "‚õÖ",
        3: "‚òÅÔ∏è",

        45: "üå´Ô∏è",
        48: "üå´Ô∏è",

        51: "üå¶Ô∏è",
        53: "üå¶Ô∏è",
        55: "üåßÔ∏è",

        61: "üåßÔ∏è",
        63: "üåßÔ∏è",
        65: "üåßÔ∏è",

        71: "üå®Ô∏è",
        73: "üå®Ô∏è",
        75: "üå®Ô∏è",
        77: "üå®Ô∏è",

        80: "üå¶Ô∏è",
        81: "üåßÔ∏è",
        82: "üåßÔ∏è",

        85: "üå®Ô∏è",
        86: "üå®Ô∏è",

        95: "‚õàÔ∏è",
        96: "‚õàÔ∏è",
        99: "‚õàÔ∏è"
    };
    const WEATHER_DESCRIPTIONS = {
        0: "Clear Sky",
        1: "Mainly Clear",
        2: "Partly Cloudy",
        3: "Overcast",

        45: "Fog",
        48: "Rime Fog",

        51: "Light Drizzle",
        53: "Moderate Drizzle",
        55: "Dense Drizzle",

        61: "Slight Rain",
        63: "Moderate Rain",
        65: "Heavy Rain",

        71: "Slight Snow",
        73: "Moderate Snow",
        75: "Heavy Snow",
        77: "Snow Grains",

        80: "Slight Rain Showers",
        81: "Moderate Rain Showers",
        82: "Violent Rain Showers",

        85: "Slight Snow Showers",
        86: "Heavy Snow Showers",

        95: "Thunderstorm",
        96: "Thunderstorm with Hail",
        99: "Thunderstorm with Heavy Hail"
    };
    const getWeatherIcon = (code) => WEATHER_ICONS[code] || "üå§Ô∏è";
    const getWeatherText = (code) => WEATHER_DESCRIPTIONS[code] || "Unknown";
    async function fetchCityCoordinates(cityName){
        const res = await fetch(
            `https://geocoding-api.open-meteo.com/v1/search?name=${cityName}&count=1`
        );
        const data = await res.json();
        if(!data.results) throw "City not found";
        return data.results[0];
    }

    async function fetchWeatherData(lat, lon){
        const res = await fetch(
            `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,wind_speed_10m,weather_code,pressure_msl&hourly=temperature_2m,weather_code&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=auto`
        );
        return res.json();
    }

    function displayCurrentWeather(location, weatherData){
        const current = weatherData.current;
        getElement("location").textContent = `${location.name}, ${location.country}`;
        getElement("date").textContent = new Date().toDateString();
        getElement("currentIcon").textContent = getWeatherIcon(current.weather_code);
        getElement("temperature").textContent = `${Math.round(current.temperature_2m)}¬∞C`;
        getElement("description").textContent = getWeatherText(current.weather_code);
        getElement("feelslike").textContent = `${Math.round(current.apparent_temperature)}¬∞C`;
        getElement("humidity").textContent = `${current.relative_humidity_2m}%`;
        getElement("windspeed").textContent = `${Math.round(current.wind_speed_10m)} km/h`;
        getElement("pressure").textContent = `${Math.round(current.pressure_msl)} hPa`;
    }

    function displayHourlyForecast(weatherData){
        const container = getElement("hourlyForecast");
        container.innerHTML = "";
        for(let i=0;i<24;i++){
            const time = new Date(weatherData.hourly.time[i]).getHours();
            container.innerHTML += `
                <div class="hourly-forecast">
                    <div>${time}:00</div>
                    <div>${getWeatherIcon(weatherData.hourly.weather_code[i])}</div>
                    <div>${Math.round(weatherData.hourly.temperature_2m[i])}¬∞C</div>
                </div>`;
        }
    }

    function displayDailyForecast(weatherData){
        const container = getElement("daysForecast");
        container.innerHTML = "";
        for(let i=0;i<7;i++){
            container.innerHTML += `
                <div class="daily-forecast">
                    <div>${i===0 ? "Today" :
                    new Date(weatherData.daily.time[i]).toLocaleDateString("en",{weekday:"short"})}</div>
                    <div>${getWeatherIcon(weatherData.daily.weather_code[i])}</div>
                    <div>
                        <span style="color:red">${Math.round(weatherData.daily.temperature_2m_max[i])}¬∞</span>
                        <span style="color:blue">${Math.round(weatherData.daily.temperature_2m_min[i])}¬∞</span>
                    </div>
                </div>`;
        }
    }

    async function searchAndLoadweather(){
        try{
            getElement("loading").style.display="block";
            document.querySelector(".weatherContent").style.display="none";
            getElement("errorMsg").style.display="none";

            const city = getElement("cityInput").value.trim();
            if(!city) throw "Please enter a city name";

            const location = await fetchCityCoordinates(city);
            const weatherData = await fetchWeatherData(location.latitude, location.longitude);

            displayCurrentWeather(location, weatherData);
            displayHourlyForecast(weatherData);
            displayDailyForecast(weatherData);

            getElement("loading").style.display="none";
            document.querySelector(".weatherContent").style.display="block";
        }
        catch(err){
            getElement("loading").style.display="none";
            getElement("errorMsg").textContent = err;
            getElement("errorMsg").style.display="block";
        }
    }

    document.querySelector("button").addEventListener("click", searchAndLoadweather);
    getElement("cityInput").addEventListener("keypress",
        e => e.key === "Enter" && searchAndLoadweather()
    );
</script>
</body>
</html>